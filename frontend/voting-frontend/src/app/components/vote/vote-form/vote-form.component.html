<div class="vote-container card p-4 shadow-sm">
  <h2 class="card-title text-center mb-4">Public Voting Form</h2>

  <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
    {{ errorMessage }}
  </div>
  <div *ngIf="successMessage" class="alert alert-success" role="alert">
    {{ successMessage }}
  </div>

  <form #voteForm="ngForm" (ngSubmit)="onSubmit()">
    <div class="form-group mb-3">
      <label for="ci" class="form-label">Identity document(CI):</label>
      <input
        id="ci"
        type="text"
        [(ngModel)]="ci"
        #ciInput="ngModel"
        name="ci"
        required
        class="form-control"
        (input)="clearMessages()"
        placeholder="Enter your identification number"
      />
      <div
        *ngIf="ciInput.invalid && (ciInput.touched || submitted)"
        class="text-danger mt-1 small"
      >
        The document is required.
      </div>
    </div>

    <div class="form-group mb-4">
      <label for="candidate" class="form-label">Select Candidate</label>
      <select
        id="candidate"
        (input)="clearMessages()"
        [(ngModel)]="selectedCandidate"
        #candidateInput="ngModel"
        name="candidate"
        required
        class="form-control"
      >
        <option value="" disabled>-- Select your option --</option>
        <option *ngFor="let c of candidates" [value]="c.id">
          {{ c.name }} {{ c.lastName }}
        </option>
      </select>
      <div
        *ngIf="candidateInput.invalid && (candidateInput.touched || submitted)"
        class="text-danger mt-1 small"
      >
        Selecting a candidate is required.
      </div>
    </div>

    <button
      type="submit"
      [disabled]="voteForm.invalid"
      class="btn btn-primary w-100"
    >
      CONFIRM VOTE
    </button>
  </form>

  <hr class="mt-5" />

  <div class="text-center mt-3">
    <p class="mb-2 small text-muted">
      View results or access management panel.
    </p>

    <button
      type="button"
      class="btn btn-sm btn-outline-info"
      (click)="router.navigate(['/results'])"
    >
      View Live Results
    </button>

    <button
      type="button"
      class="btn btn-sm btn-outline-secondary ms-2"
      (click)="router.navigate(['/login'])"
    >
      Admin Access
    </button>
  </div>
</div>
